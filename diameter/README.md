# Diameter protocol

this notes is about diameter protocol

## Introduction

Before dive into diameter protocol, you should be familiar with telecommunications networks such as traditional Public Switched Telephone Network (PSTN) and describe the Universal Mobile Telecommunications System (UMTS) that integrates the internet with wireless technologies. Then explanation about the _IP 
Multimedia core network Subsystem_ (IMS) developed based on UMTS, which enhances the functionality of the packet-switches service domain.

In PSTN, the real-time billing information is delivered through the Signaling System no.7 (SS7) network. During the call setup/release process, 
the monitor system tracks SS7 message of the call and, once the call is complete generates a Call Detail Record (CDR) in the AMA format. 
The CDR is then transferred to the rating and billing system.

In the traditional circuit-switched domain, a CDR is the computer record produced by a telephone exchange containing details of a call that passed through it.
In the packet-switched domain, a CDR is generated by generated by a network node for a data session. The "CDR" term is referred to as a Charging Data Record.

Based on book _"Charging for mobile all-IP telecommunications"_ by Dr. Yi-Bing Lin, CDR stands for "Call Detail Record" in a typical telephone call, and for
"Charging Data Record" in a data session.


## glossary
- HLR (Home Location Register)
- IMSI (International Mobile Subscriber Identity)
- VLR (Visitor Location Register)

### Realm

Is an administrative domain ofers associated with ownership. An administrative domain is the collection of resources (hosts, routers of interconnecting networks) under the control of a single administrative authority such an authority can be an internet service provider. The internet service provider has a network that is registered under one domain, e.g. xs4all.nl. An example of an issue with multiple realms is roaming.

### Roaming

Is the situation where the user is connected to a network that is not the network of its own internet service provider.

### Diameter server

Basically this is app connects to Diameter and fetch CCR from it, check whether company could afford it (via company balance or bought package), build JSON for CDR (CCR entity in our system) and pass it to Billing CDR seriver where we deduct from balances/packages. For now Iâ€™d like to know how we fetch data from Diameter and where is the queue which is used to store built CDRs JSONs to pass it later to BillingCDR service

## Application

A diameter application is not a software application but it is a protocol based on the Diameter base protocol defined in RFC 6733 and RFC 7075 (Obsolotes: RFC 3588). Each application is defined by an application identifier and can add new command codes and/or new mandatory AVPs (Attribute-Value Pair). Adding a new optional AVP does not require a new application.

Examples of Diameter Applications:
- Diameter Mobile IPv4 Application (MobileIP, RFC 4004)
- Diameter Network Access Server Application (NASREQ, RFC 7155)(Obsoletes: RFC 4005)
- Diameter Extensible Authentication Protocol Application (RFC 4072)
- Diameter Credit-Control Application (DCCA, RFC 8506])(Obsoletes: RFC 4006)
- Diameter Session Initiation Protocol Application (RFC 4740)
- Various applications in the 3GPP IP Multimedia Subsystem

(source: https://en.wikipedia.org/wiki/Diameter_(protocol))

